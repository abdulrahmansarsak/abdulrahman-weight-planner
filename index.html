<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù†Ø²ÙˆÙ„ Ø§Ù„ÙˆØ²Ù† | Abdulrahman Sarsak</title>

<!-- ChartJS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* ===========================
   VARIABLES (THEME)
=========================== */
:root {
  --bg: #0b1120;
  --bg-elevated: #111827;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --accent: #22c55e;
  --accent-soft: rgba(34,197,94,0.15);
  --danger: #ef4444;
  --border: #1f2937;
}

body[data-theme="light"] {
  --bg: #f3f4f6;
  --bg-elevated: #ffffff;
  --text: #111827;
  --muted: #6b7280;
  --accent: #16a34a;
  --accent-soft: rgba(16,163,74,0.1);
  --border: #d1d5db;
}

/* ===========================
   BASE STYLE
=========================== */
body {
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 20px;
  font-family: system-ui;
}

.container {
  max-width: 1100px;
  margin: auto;
  background: var(--bg-elevated);
  padding: 20px;
  border-radius: 16px;
  border: 1px solid var(--border);
}

/* HEADER */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo img {
  width: 65px;
  height: 65px;
  border-radius: 50%;
  border: 2px solid var(--accent);
}

.toggle, .lang-toggle {
  cursor: pointer;
  padding: 8px 12px;
  background: var(--accent-soft);
  border-radius: 10px;
  color: var(--accent);
  font-size: 12px;
}

/* TITLES */
.section-title {
  margin-top: 22px;
  font-size: 15px;
  font-weight: bold;
  color: var(--accent);
  border-right: 4px solid var(--accent);
  padding-right: 8px;
}

/* FORM GRID */
.form-grid {
  display: grid;
  grid-template-columns: repeat(2,1fr);
  gap: 12px;
}

@media (max-width:700px){
  .form-grid {
    grid-template-columns: 1fr;
  }
}

.field label {
  font-size: 12px;
  color: var(--muted);
}

.field input, .field select {
  padding: 8px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
}

/* CHIPS */
.radio-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.chip {
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  cursor: pointer;
  font-size: 12px;
  color: var(--muted);
}

.chip.active {
  background: var(--accent-soft);
  color: var(--accent);
  border-color: var(--accent);
}

/* BUTTON */
.btn {
  padding: 12px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 12px;
  width: 100%;
  font-size: 14px;
  margin-top: 12px;
  cursor: pointer;
}

/* MACROS */
.macro-grid {
  display: grid;
  grid-template-columns: repeat(3,1fr);
  gap: 10px;
}

.macro-pill {
  padding: 12px;
  border-radius: 12px;
  background: var(--bg);
  border: 1px dashed var(--border);
  font-size: 12px;
}

/* CHART */
.chart-box {
  margin-top: 20px;
  height: 240px;
}

/* EXERCISE TABLE */
.exercise-table {
  width: 100%;
  font-size: 12px;
  margin-top: 10px;
}

.exercise-table th {
  color: var(--muted);
}

/* PDF BUTTON */
.pdf-btn {
  padding: 10px;
  background: #0284c7;
  color: #fff;
  border-radius: 8px;
  font-size: 12px;
  cursor: pointer;
  width: 150px;
  margin-top: 12px;
}
</style>
</head>

<body data-theme="dark">

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="logo"><img src="as-logo.png"></div>

    <div>
      <span class="toggle" id="themeToggle">ğŸŒ™ / â˜€ï¸</span>
      &nbsp;
      <span class="lang-toggle" id="langToggle">AR / EN</span>
    </div>
  </div>

  <h2 style="margin-top:10px;">Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù†Ø²ÙˆÙ„ Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Â· Abdulrahman Sarsak</h2>


  <!-- BASIC INFO -->
  <div class="section-title">Ù¡) Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</div>

  <div class="form-grid">
    <div class="field">
      <label>Ø§Ù„Ø¹Ù…Ø± / Age</label>
      <input id="age">
    </div>

    <div class="field">
      <label>Ø§Ù„Ø¬Ù†Ø³ / Sex</label>
      <select id="sex">
        <option value="male">Ø°ÙƒØ±</option>
        <option value="female">Ø£Ù†Ø«Ù‰</option>
      </select>
    </div>

    <div class="field">
      <label>Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…)</label>
      <input id="height">
    </div>

    <div class="field">
      <label>Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ø­Ø§Ù„ÙŠ (ÙƒØ¬Ù…)</label>
      <input id="weight">
    </div>

    <div class="field">
      <label>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø´Ø§Ø·</label>
      <select id="activity">
        <option value="1.2">Ù…Ù†Ø®ÙØ¶</option>
        <option value="1.375">Ø®ÙÙŠÙ</option>
        <option value="1.55">Ù…ØªÙˆØ³Ø·</option>
        <option value="1.725">Ø¹Ø§Ù„Ù</option>
      </select>
    </div>

    <div class="field">
      <label>Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
      <input id="targetWeight">
    </div>
  </div>


  <!-- PACE -->
  <div class="section-title">Ù¢) Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ø²ÙˆÙ„</div>

  <div class="radio-row" id="paceRow">
    <div class="chip active" data-pace="0.5">0.5 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹</div>
    <div class="chip" data-pace="1">1 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹</div>
    <div class="chip" data-pace="2.5" style="border-color:#ef4444;color:#ef4444;">ğŸ”¥ Super Aggressive (2â€“3 kg/week)</div>
  </div>


  <!-- AVERAGE DAILY INTAKE -->
  <div class="section-title">Ù£) Ù…ØªÙˆØ³Ø· Ù…Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>

  <div class="field">
    <label>Average Daily Intake</label>
    <input id="avgIntake" placeholder="Ù…Ø«Ø§Ù„: 2300">
  </div>


  <button class="btn" id="calcBtn">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø¢Ù†</button>




  <!-- RESULTS -->
  <div class="section-title">Ù¤) Ø§Ù„Ù†ØªØ§Ø¦Ø¬</div>
  <div id="resultsArea"></div>


  <!-- MACROS -->
  <div class="section-title">Ù¥) Ø§Ù„Ù…Ø§ÙƒØ±ÙˆØ²</div>
  <div class="macro-grid">
    <div class="macro-pill" id="proteinInfo">â€”</div>
    <div class="macro-pill" id="fatInfo">â€”</div>
    <div class="macro-pill" id="carbInfo">â€”</div>
  </div>


  <!-- CHART -->
  <div class="section-title">Ù¦) Ù…Ù†Ø­Ù†Ù‰ Ù†Ø²ÙˆÙ„ Ø§Ù„ÙˆØ²Ù†</div>
  <div class="chart-box">
    <canvas id="weightChart"></canvas>
  </div>


  <!-- EXERCISES -->
  <div class="section-title">Ù§) Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ­Ø±Ù‚ Ø§Ù„Ø³Ø¹Ø±Ø§Øª</div>

  <table class="exercise-table">
    <thead>
      <tr><th>Ø§Ù„ØªÙ…Ø±ÙŠÙ†</th><th>30 Ø¯Ù‚ÙŠÙ‚Ø©</th><th>60 Ø¯Ù‚ÙŠÙ‚Ø©</th></tr>
    </thead>
    <tbody id="exerciseTableBody"></tbody>
  </table>

  <div class="form-grid" style="margin-top:8px;">
    <select id="exerciseSelect"></select>
    <input id="exerciseWeight" placeholder="ÙˆØ²Ù†Ùƒ (ÙƒØ¬Ù…)">
    <input id="exerciseMinutes" placeholder="Ø§Ù„Ù…Ø¯Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)">
  </div>

  <button class="btn" id="exerciseCalcBtn">ğŸ”¥ Ø§Ø­Ø³Ø¨ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</button>
  <p id="exerciseResult" style="color:var(--muted);font-size:13px;"></p>


  <!-- PDF EXPORT -->
  <button class="pdf-btn" id="pdfBtn">ğŸ“„ ØªØµØ¯ÙŠØ± PDF</button>

</div>


<script>
/* ==============================
   GLOBALS
============================== */
let weightChart;
let lang = "ar";

/* ==============================
   THEME SWITCH
============================== */
document.getElementById("themeToggle").onclick = () => {
  const current = document.body.getAttribute("data-theme");
  document.body.setAttribute("data-theme", current === "dark" ? "light" : "dark");
};


/* ==============================
   LANGUAGE SWITCH
============================== */
document.getElementById("langToggle").onclick = () => {
  lang = (lang === "ar" ? "en" : "ar");
  alert("ğŸ’¡ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù„ØºØ©: " + (lang === "ar" ? "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" : "English"));
};



/* ==============================
   EXERCISES
============================== */
const exercises = [
  {name:"Ø§Ù„Ù…Ø´ÙŠ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ", kcal:280},
  {name:"Ø§Ù„Ù…Ø´ÙŠ Ø§Ù„Ø³ÙŠØ±", kcal:260},
  {name:"Ø§Ù„Ø¬Ø±ÙŠ", kcal:600},
  {name:"Ø¯Ø±Ø§Ø¬Ø©", kcal:520},
  {name:"HIIT", kcal:800},
  {name:"Ù…Ù‚Ø§ÙˆÙ…Ø©", kcal:360},
  {name:"Ù…Ù„Ø§ÙƒÙ…Ø© ğŸ¥Š", kcal:780}
];

const exerciseTableBody = document.getElementById("exerciseTableBody");
const exerciseSelect = document.getElementById("exerciseSelect");

exercises.forEach(ex=>{
  const tr = document.createElement("tr");
  tr.innerHTML = `<td>${ex.name}</td><td>${(ex.kcal/2).toFixed(0)}</td><td>${ex.kcal}</td>`;
  exerciseTableBody.appendChild(tr);

  const opt = document.createElement("option");
  opt.value = ex.kcal;
  opt.textContent = ex.name;
  exerciseSelect.appendChild(opt);
});


document.getElementById("exerciseCalcBtn").onclick = ()=>{
  const kcal = parseFloat(exerciseSelect.value);
  const weight = parseFloat(document.getElementById("exerciseWeight").value||70);
  const minutes = parseFloat(document.getElementById("exerciseMinutes").value||30);

  const burn = ((kcal*(weight/70))*(minutes/60)).toFixed(0);

  document.getElementById("exerciseResult").innerHTML =
    `ØªØ­Ø±Ù‚ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ <b>${burn}</b> Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©`;
};



/* ==============================
   CALCULATION
============================== */
document.getElementById("calcBtn").onclick = ()=>{

  const age = parseFloat(age.value);
  const h = parseFloat(height.value);
  const w = parseFloat(weight.value);
  const act = parseFloat(activity.value);
  const sex = document.getElementById("sex").value;
  const target = parseFloat(targetWeight.value);
  const avgIntake = parseFloat(document.getElementById("avgIntake").value||0);

  if(!age||!h||!w){
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©");
    return;
  }

  /* BMR */
  let bmr = (sex==="male") ? 10*w+6.25*h-5*age+5 : 10*w+6.25*h-5*age-161;
  const maintenance = Math.round(bmr*act);

  /* PACE */
  const pace = parseFloat(document.querySelector(".chip.active").dataset.pace);
  const dailyDef = (pace*7700)/7;
  let cut = Math.round(maintenance-dailyDef);

  /* SAFE */
  if(sex==="male" && cut<1500) cut=1500;
  if(sex==="female" && cut<1200) cut=1200;

  /* IF USER ENTERED INTAKE */
  let realDef = maintenance - cut;
  if(avgIntake>0){
    realDef = maintenance - avgIntake;
    if(realDef<0) realDef=0;
  }

  const weeklyLoss = (realDef*7)/7700;

  let weeks = 0;
  if(target && target<w && weeklyLoss>0){
    weeks = (w-target)/weeklyLoss;
  }

  /* RESULTS */
  resultsArea.innerHTML = `
    <div>BMR: ${Math.round(bmr)} kcal</div>
    <div>Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©: ${maintenance}</div>
    <div>Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ù‡Ø¯Ù: ${cut}</div>
    <div>Ø§Ù„Ù†Ø²ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: ${weeklyLoss.toFixed(2)} ÙƒØ¬Ù…</div>
    ${weeks>0?`<div>Ù…Ø¯Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù‡Ø¯Ù: ${weeks.toFixed(1)} Ø£Ø³Ø¨ÙˆØ¹</div>`:""}
  `;

  /* MACROS */
  const p = Math.round(w*1.8);
  const f = Math.round((cut*0.3)/9);
  let c = Math.round((cut-(p*4)-(f*9))/4);
  if(c<30) c=30;

  proteinInfo.innerHTML=`Protein: ${p}g`;
  fatInfo.innerHTML=`Fat: ${f}g`;
  carbInfo.innerHTML=`Carbs: ${c}g`;

  /* CHART */
  const ctx = document.getElementById("weightChart");

  if(weightChart) weightChart.destroy();

  if(target && weeks>0){
    const labels=[], data=[];
    for(let i=0;i<=weeks;i+=Math.max(1,weeks/12)){
      labels.push("Ø£Ø³Ø¨ÙˆØ¹ "+i.toFixed(1));
      data.push(w - ((w-target)*(i/weeks)));
    }

    weightChart = new Chart(ctx,{
      type:"line",
      data:{
        labels,
        datasets:[{
          data,
          borderColor:"#22c55e",
          backgroundColor:"rgba(34,197,94,0.2)",
          fill:true,
          tension:0.4
        }]
      },
      options:{responsive:true,maintainAspectRatio:false}
    });
  }
};


/* ==============================
   EXPORT TO PDF
============================== */
document.getElementById("pdfBtn").onclick = () => {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  pdf.text("Weight Loss Plan â€“ Abdulrahman Sarsak", 10, 10);
  pdf.text(document.getElementById("resultsArea").innerText, 10, 30);

  pdf.save("Abdulrahman-FatLoss-Plan.pdf");
};

</script>

</body>
</html>
